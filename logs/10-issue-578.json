{"author":{"id":"MDQ6VXNlcjM5OTA4OTA4","is_bot":false,"login":"veb86","name":""},"body":"# **Техническое задание на разработку команды `layerWeightBigSmall`**\n\n**Путь размещения файлов:**\n`zcad\\velec\\space\\`\n\n**Имя основного файла команды:**\n`uzvcommand_layerWeightBigSmall.pas`\n\n---\n\n## **1. Назначение команды**\n\nКоманда `layerWeightBigSmall(имя_слоя)` предназначена для быстрого переключения веса указанного слоя между двумя фиксированными значениями (большой ↔ маленький).\nИспользуется для автоматизации смены веса линий без необходимости открытия менеджера слоёв.\n\n---\n\n## **2. Формат вызова**\n\n```\nlayerWeightBigSmall(\u003cLayerName\u003e)\n```\n\n`LayerName` — строковое имя слоя.\n\n---\n\n## **3. Логика выполнения**\n\n1. Команда получает имя слоя в качестве аргумента.\n2. Проверяет существование слоя в текущем чертеже.\n3. Если слой **не существует**:\n\n   * Команда **не выполняется**.\n   * В UI через `zcUI` выводится сообщение:\n     **\"Слой \u003cLayerName\u003e не существует\"**.\n4. Если слой существует и его текущий вес **не равен CONST_LAYER_WEIGHT_BIG**, то:\n\n   * Установить вес = `CONST_LAYER_WEIGHT_BIG`.\n5. Если слой существует и его текущий вес **равен CONST_LAYER_WEIGHT_BIG**, то:\n\n   * Установить вес = `CONST_LAYER_WEIGHT_SMALL`.\n\n---\n\n## **4. Константы**\n\nВсе значения веса вывести в константы в этом же файле:\n\n```\nCONST_LAYER_WEIGHT_BIG   = 2;\nCONST_LAYER_WEIGHT_SMALL = 0;\n```\n\nСделать их легко редактируемыми для будущих изменений (в секции `const`).\n\n---\n\n## **5. Требования к реализации**\n\n### 5.1. Работа со слоями\n\n* Использовать стандартный механизм получения слоя\n  (`Drawings.GetCurrentDWG^.GetLayerTable^` или аналог, как в других командах velec).\n* Изменение веса слоя производить через его параметр `LineWeight`.\n\n### 5.2. Стиль кода\n\n* Команда должна быть оформлена в едином стиле с другими командами `velec\\space`.\n* Регистрация команды выполняется в секции `initialization`.\n\n---\n\n## **6. Структура файла `uzvcommand_layerWeightBigSmall.pas`**\n\nФайл должен содержать:\n\n1. **Список uses** — по аналогии с другими командами в `velec\\space`.\n2. **Описание констант** (веса слоя).\n3. **Функцию обработки команды**:\n\n```\nprocedure layerWeightBigSmall_Command(const Params: TCommandParams);\n```\n\n4. Обработку аргументов: один обязательный параметр — имя слоя.\n5. Проверку существования слоя.\n6. Выполнение переключения веса.\n7. Вывод сообщений.\n8. Регистрацию команды:\n\n```\ninitialization\n  CommandManager.RegisterCommand('layerWeightBigSmall', @layerWeightBigSmall_Command);\n```\n","comments":[],"labels":[],"number":578,"state":"OPEN","title":"Создать новую команду layerWeightBigSmall"}
