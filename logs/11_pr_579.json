{"author":{"id":"MDQ6VXNlcjE0MzE5MDQ=","is_bot":false,"login":"konard","name":"Konstantin Diachenko"},"baseRefName":"master","body":"## Создание команды layerWeightBigSmall\n\nFixes veb86/zcadvelecAI#578\n\nДобавлена команда `layerWeightBigSmall(<LayerName>)`, переключающая вес указанного слоя между «большой» и «маленький» величинами.\n\nОсновные детали:\n- Путь: `cad_source/zcad/velec/space/uzvcommand_layerWeightBigSmall.pas`\n- Регистрация команды: через `CreateZCADCommand(@layerWeightBigSmall_com,'layerWeightBigSmall',CADWG,0)` и подключение модуля в `cad_source/zcad.pas` (только для ELECTROTECH)\n- Формат вызова: `layerWeightBigSmall(<ИмяСлоя>)`\n- Поведение:\n  - Если слой не найден — выводится сообщение: «Слой <ИмяСлоя> не существует» (через `zcUI.TextMessage`), команда завершается без ошибки\n  - Если текущий вес слоя не равен «большому», устанавливается «большой»; иначе — «маленький»\n- Константы веса вынесены в секцию `const` и соответствуют внутренним единицам ZCAD (сотые доли мм):\n  - `CONST_LAYER_WEIGHT_BIG = LnWt200`  // 2.00 мм\n  - `CONST_LAYER_WEIGHT_SMALL = LnWt000` // 0.00 мм\n\nПарсинг аргументов:\n- Поддерживается ввод в виде `layerWeightBigSmall(Name)`, а также с кавычками/скобками — имя нормализуется функцией `NormalizeLayerName`.\n\nМини-план проверки вручную:\n1) Создайте/выберите слой `TestLayer`.\n2) Выполните `layerWeightBigSmall(TestLayer)` — вес станет 2.00 мм; повторный вызов переключит на 0.00 мм.\n3) Для несуществующего слоя — появится сообщение об ошибке и без изменений.\n\nТехнические заметки:\n- Использованы типы и хелперы из `uzccommandsimpl`, `uzcdrawings`, `uzestyleslayers`, `uzeconsts` — в стиле уже существующих команд в `velec/space`.\n- Константы заданы через `uzeconsts` (`LnWt200/LnWt000`) для корректного соответствия внутреннему типу LineWeight.\n— editing PR via gh\n","headRefName":"issue-578-5408550377d7","isCrossRepository":true,"mergeStateStatus":"CLEAN","number":579,"title":"Создать новую команду layerWeightBigSmall","updatedAt":"2025-11-18T07:46:13Z"}
