{"author":{"id":"MDQ6VXNlcjE0MzE5MDQ=","is_bot":false,"login":"konard","name":"Konstantin Diachenko"},"baseRefName":"master","body":"## Создание команды layerWeightBigSmall\n\nFixes veb86/zcadvelecAI#578\n\nДобавлена команда `layerWeightBigSmall(<LayerName>)`, переключающая вес указанного слоя между «большой» и «маленький» величинами.\n\nОсновные детали:\n- Путь: `cad_source/zcad/velec/space/uzvcommand_layerWeightBigSmall.pas`\n- Регистрация команды: через `CreateZCADCommand(@layerWeightBigSmall_com,'layerWeightBigSmall',CADWG,0)` и подключение модуля в `cad_source/zcad.pas` (только для ELECTROTECH)\n- Формат вызова: `layerWeightBigSmall(<ИмяСлоя>)`\n- Поведение:\n  - Если слой не найден — выводится сообщение: «Слой <ИмяСлоя> не существует» (через `zcUI.TextMessage`), команда завершается без ошибки\n  - Если текущий вес слоя не равен «большому», устанавливается «большой»; иначе — «маленький»\n- Константы веса вынесены в секцию `const` и соответствуют внутренним единицам ZCAD (сотые доли мм):\n  - `CONST_LAYER_WEIGHT_BIG = LnWt200`  // 2.00 мм\n  - `CONST_LAYER_WEIGHT_SMALL = LnWt000` // 0.00 мм\n\nПарсинг аргументов:\n- Поддерживается ввод в виде `layerWeightBigSmall(Name)`, а также с кавычками/скобками — имя нормализуется функцией `NormalizeLayerName`.\n\nМини-план проверки вручную:\n1) Создайте/выберите слой `TestLayer`.\n2) Выполните `layerWeightBigSmall(TestLayer)` — вес станет 2.00 мм; повторный вызов переключит на 0.00 мм.\n3) Для несуществующего слоя — появится сообщение об ошибке и без изменений.\n\nТехнические заметки:\n- Использованы типы и хелперы из `uzccommandsimpl`, `uzcdrawings`, `uzestyleslayers`, `uzeconsts` — в стиле уже существующих команд в `velec/space`.\n- Константы заданы через `uzeconsts` (`LnWt200/LnWt000`) для корректного соответствия внутреннему типу LineWeight.\n— editing PR via gh\n","commits":[{"authoredDate":"2025-11-18T07:36:19Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2025-11-18T07:36:19Z","messageBody":"Adding CLAUDE.md with task information for AI processing.\nThis file will be removed when the task is complete.\n\nIssue: https://github.com/veb86/zcadvelecAI/issues/578","messageHeadline":"Initial commit with task details for issue #578","oid":"5a4281bd1aa3c35073fa89fda679f8171d78d8f8"},{"authoredDate":"2025-11-18T07:38:49Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2025-11-18T07:38:49Z","messageBody":"…ht (2.00mm/0.00mm); register in main uses","messageHeadline":"velec/space: add layerWeightBigSmall command to toggle layer lineweig…","oid":"53810b010c4f016730f6e4d15f15b6c555c7d1b5"},{"authoredDate":"2025-11-18T07:39:07Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2025-11-18T07:39:07Z","messageBody":"This reverts commit 5a4281bd1aa3c35073fa89fda679f8171d78d8f8.","messageHeadline":"Revert \"Initial commit with task details for issue #578\"","oid":"ae700d758ec68794d754e513ae4755449957ff3d"}],"headRefName":"issue-578-5408550377d7","headRepository":{"id":"R_kgDOP95Ojw","name":"zcadvelecAI","nameWithOwner":""},"isDraft":false,"mergeStateStatus":"CLEAN","number":579,"state":"OPEN","title":"Создать новую команду layerWeightBigSmall","updatedAt":"2025-11-18T07:49:06Z","url":"https://github.com/veb86/zcadvelecAI/pull/579"}
